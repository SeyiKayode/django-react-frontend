(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{35:function(e,t,a){e.exports=a(65)},42:function(e,t,a){},65:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(31),s=a.n(l),i=a(7);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var o=a(18),c=a.n(o),u=a(32),m=a(4),d=a(5),h=a(1),p=a(11),b=a(10),g=a(2),v=(a(41),a(42),a(33)),f=a.n(v).a.create({baseURL:"https://djangoreact-api.herokuapp.com/api",timeout:5e3,headers:{Authorization:"JWT "+localStorage.getItem("access_token"),"Content-type":"application/json",accept:"application/json"}});f.interceptors.response.use((function(e){return e}),(function(e){var t=e.config;if(401===e.response.status&&t.url===f.baseURL+"token/refresh")return window.location.href="/login/",Promise.reject(e);if("token_not_valid"===e.response.data.code&&401===e.response.status&&"Unauthorized"===e.response.statusText){var a=localStorage.getItem("refresh_token");if(a){var n=JSON.parse(atob(a.split(".")[1])),r=Math.ceil(Date.now()/1e3);if(console.log(n.exp),n.exp>r)return f.post("/token/refresh/",{refresh:a}).then((function(e){return localStorage.setItem("access_token",e.data.access),localStorage.setItem("refresh_token",e.data.refresh),f.defaults.headers.Authorization="JWT "+e.data.access,t.headers.Authorization="JWT "+e.data.access,f(t)})).catch((function(e){console.log(e)}));console.log("Refresh token is expired",n.exp,r),window.location.href="/login/"}else console.log("Refresh token not available"),window.location.href="/login/"}return Promise.reject(e)}));var E=f,T=new(function(){function e(){Object(m.a)(this,e)}return Object(d.a)(e,[{key:"getAll",value:function(){return E.get("/tutorials")}},{key:"get",value:function(e){return E.get("/tutorials/".concat(e))}},{key:"create",value:function(e){return E.post("/tutorials",e)}},{key:"update",value:function(e,t){return E.put("/tutorials/".concat(e),t)}},{key:"delete",value:function(e){return E.delete("/tutorials/".concat(e))}},{key:"deleteAll",value:function(){return E.delete("/tutorials")}},{key:"findByTitle",value:function(e){return E.get("/tutorials?title=".concat(e))}}]),e}()),k=function(e){Object(p.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).onChangeTitle=n.onChangeTitle.bind(Object(h.a)(n)),n.onChangeDescription=n.onChangeDescription.bind(Object(h.a)(n)),n.saveTutorial=n.saveTutorial.bind(Object(h.a)(n)),n.newTutorial=n.newTutorial.bind(Object(h.a)(n)),n.state={id:null,title:"",description:"",published:!1,submitted:!1},n}return Object(d.a)(a,[{key:"onChangeTitle",value:function(e){this.setState({title:e.target.value})}},{key:"onChangeDescription",value:function(e){this.setState({description:e.target.value})}},{key:"saveTutorial",value:function(){var e=this,t={title:this.state.title,description:this.state.description};T.create(t).then((function(t){e.setState({id:t.data.id,title:t.data.title,description:t.data.description,published:t.data.published,submitted:!0}),console.log(t.data)})).catch((function(e){console.log(e)}))}},{key:"newTutorial",value:function(){this.setState({id:null,title:"",description:"",published:!1,submitted:!1})}},{key:"render",value:function(){return r.a.createElement("div",{className:"submit-form"},this.state.submitted?r.a.createElement("div",null,r.a.createElement("h4",null,"You submitted successfully!"),r.a.createElement("button",{className:"btn btn-success",onClick:this.newTutorial},"Add")):r.a.createElement("div",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"title"},"Title"),r.a.createElement("input",{type:"text",className:"form-control",id:"title",name:"title",value:this.state.title,onChange:this.onChangeTitle,required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"description"},"Description"),r.a.createElement("input",{type:"text",className:"form-control",id:"description",name:"description",value:this.state.description,onChange:this.onChangeDescription,required:!0})),r.a.createElement("button",{onClick:this.saveTutorial,className:"btn btn-success"},"Submit")))}}]),a}(n.Component),y=a(14),j=function(e){Object(p.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).onChangeTitle=n.onChangeTitle.bind(Object(h.a)(n)),n.onChangeDescription=n.onChangeDescription.bind(Object(h.a)(n)),n.getTutorial=n.getTutorial.bind(Object(h.a)(n)),n.updatePublished=n.updatePublished.bind(Object(h.a)(n)),n.updateTutorial=n.updateTutorial.bind(Object(h.a)(n)),n.deleteTutorial=n.deleteTutorial.bind(Object(h.a)(n)),n.state={currentTutorial:{id:null,title:"",description:"",published:!1},message:""},n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.getTutorial(this.props.match.params.id)}},{key:"onChangeTitle",value:function(e){var t=e.target.value;this.setState((function(e){return{currentTutorial:Object(y.a)(Object(y.a)({},e.currentTutorial),{},{title:t})}}))}},{key:"onChangeDescription",value:function(e){var t=e.target.value;this.setState((function(e){return{currentTutorial:Object(y.a)(Object(y.a)({},e.currentTutorial),{},{description:t})}}))}},{key:"getTutorial",value:function(e){var t=this;T.get(e).then((function(e){t.setState({currentTutorial:e.data}),console.log(e.data)})).catch((function(e){console.log(e)}))}},{key:"updatePublished",value:function(e){var t=this,a={id:this.state.currentTutorial.id,title:this.state.currentTutorial.title,description:this.state.currentTutorial.description,published:e};T.update(this.state.currentTutorial.id,a).then((function(a){t.setState((function(t){return{currentTutorial:Object(y.a)(Object(y.a)({},t.currentTutorial),{},{published:e})}})),console.log(a.data)})).catch((function(e){console.log(e)}))}},{key:"updateTutorial",value:function(){var e=this;T.update(this.state.currentTutorial.id,this.state.currentTutorial).then((function(t){console.log(t.data),e.setState({message:"The tutorial was updated successfully!"})})).catch((function(e){console.log(e)}))}},{key:"deleteTutorial",value:function(){var e=this;T.delete(this.state.currentTutorial.id).then((function(t){console.log(t.data),e.props.history.push("/tutorials")})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this,t=this.state.currentTutorial;return r.a.createElement("div",null,t?r.a.createElement("div",{className:"edit-form"},r.a.createElement("h4",null,"Tutorial"),r.a.createElement("form",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"title"},"Title"),r.a.createElement("input",{type:"text",className:"form-control",id:"title",value:t.title,onChange:this.onChangeTitle})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"description"},"Description"),r.a.createElement("input",{type:"text",className:"form-control",id:"description",value:t.description,onChange:this.onChangeDescription})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,r.a.createElement("strong",null,"Status:")),t.published?"Published":"Pending")),t.published?r.a.createElement("button",{className:"badge badge-primary mr-2",onClick:function(){return e.updatePublished(!1)}},"UnPublish"):r.a.createElement("button",{className:"badge badge-primary mr-2",onClick:function(){return e.updatePublished(!0)}},"Publish"),r.a.createElement("button",{className:"badge badge-danger mr-2",onClick:this.deleteTutorial},"Delete"),r.a.createElement("button",{type:"submit",className:"badge badge-success",onClick:this.updateTutorial},"Update"),r.a.createElement("p",null,this.state.message)):r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("p",null,"Please Click on a Tutorial...")))}}]),a}(n.Component),C=function(e){Object(p.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).onChangeSearchTitle=n.onChangeSearchTitle.bind(Object(h.a)(n)),n.retrieveTutorials=n.retrieveTutorials.bind(Object(h.a)(n)),n.refreshList=n.refreshList.bind(Object(h.a)(n)),n.setActiveTutorial=n.setActiveTutorial.bind(Object(h.a)(n)),n.removeAllTutorials=n.removeAllTutorials.bind(Object(h.a)(n)),n.searchTitle=n.searchTitle.bind(Object(h.a)(n)),n.state={tutorials:[],currentTutorial:null,currentIndex:-1,searchTitle:""},n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.retrieveTutorials()}},{key:"onChangeSearchTitle",value:function(e){var t=e.target.value;this.setState({searchTitle:t})}},{key:"retrieveTutorials",value:function(){var e=this;T.getAll().then((function(t){e.setState({tutorials:t.data}),console.log(t.data)})).catch((function(e){console.log(e)}))}},{key:"refreshList",value:function(){this.retrieveTutorials(),this.setState({currentTutorial:null,currentIndex:-1})}},{key:"setActiveTutorial",value:function(e,t){this.setState({currentTutorial:e,currentIndex:t})}},{key:"removeAllTutorials",value:function(){var e=this;T.deleteAll().then((function(t){console.log(t.data),e.refreshList()})).catch((function(e){console.log(e)}))}},{key:"searchTitle",value:function(){var e=this;T.findByTitle(this.state.searchTitle).then((function(t){e.setState({tutorials:t.data}),console.log(t.data)})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.searchTitle,n=t.currentIndex,l=t.currentTutorial,s=t.tutorials;return r.a.createElement("div",{className:"list row"},r.a.createElement("div",{className:"col-md-8"},r.a.createElement("div",{className:"input-group mb-3"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"Search by title",value:a,onChange:this.onChangeSearchTitle}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("button",{type:"button",className:"btn btn-outline-secondary",onClick:this.searchTitle},"Search")))),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("h4",null,"Tutorials List"),r.a.createElement("ul",{className:"list-group"},s&&s.map((function(t,a){return r.a.createElement("li",{className:"list-group-item "+(a===n?"active":""),onClick:function(){return e.setActiveTutorial(t,a)},key:a},t.title)}))),r.a.createElement("button",{className:"m-3 btn btn-sm btn-danger",onClick:this.removeAllTutorials},"Remove All")),r.a.createElement("div",{className:"col-md-6"},l?r.a.createElement("div",null,r.a.createElement("h4",null,"Tutorial"),r.a.createElement("div",null,r.a.createElement("label",null,r.a.createElement("strong",null,"Title:"))," ",l.title),r.a.createElement("div",null,r.a.createElement("label",null,r.a.createElement("strong",null,"Description:"))," ",l.description),r.a.createElement("div",null,r.a.createElement("label",null,r.a.createElement("strong",null,"Status:"))," ",l.published?"Published":"Pending"),r.a.createElement(i.b,{to:"/tutorials/".concat(l.id),className:"badge badge-warning"},"Edit")):r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("p",null,"Please Click on a Tutorial..."))))}}]),a}(n.Component),O=a(15),N=function(e){Object(p.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).handleChange=n.handleChange.bind(Object(h.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(h.a)(n)),n.state={username:"",password:"",redirect:null,errors:{},message:""},n}return Object(d.a)(a,[{key:"handleChange",value:function(e){this.setState(Object(O.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),E.post("/token/obtain/",{username:this.state.username,password:this.state.password}).then((function(e){E.defaults.headers.Authorization="JWT "+e.data.access,localStorage.setItem("access_token",e.data.access),localStorage.setItem("refresh_token",e.data.refresh),t.setState({username:"",password:"",redirect:"/"})})).catch((function(e){console.log(e),t.setState({errors:e.response.data,message:"Please enter a valid username or password!"})}))}},{key:"render",value:function(){return this.state.redirect?r.a.createElement(g.a,{to:this.state.redirect}):r.a.createElement("div",{className:"submit-form"},r.a.createElement("h3",null,"Login Page"),r.a.createElement("br",null),r.a.createElement("p",{style:{color:"red"}},this.state.errors?this.state.message:null),r.a.createElement("form",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Username:",r.a.createElement("input",{className:"form-control",type:"text",name:"username",value:this.state.username,onChange:this.handleChange}),r.a.createElement("p",{style:{color:"red"}},this.state.errors.username?this.state.errors.username:null))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Password:",r.a.createElement("input",{className:"form-control",type:"password",name:"password",value:this.state.password,onChange:this.handleChange}),r.a.createElement("p",{style:{color:"red"}},this.state.errors.password?this.state.errors.password:null))),r.a.createElement("p",null,"Don't have an Account? ",r.a.createElement(i.b,{to:"/signup"},"Register")),r.a.createElement("button",{className:"btn btn-primary",onClick:this.handleSubmit},"Login")))}}]),a}(n.Component),S=Object(g.g)(N),w=function(e){Object(p.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).handleChange=n.handleChange.bind(Object(h.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(h.a)(n)),n.state={username:"",password:"",email:"",redirect:null,errors:{}},n}return Object(d.a)(a,[{key:"handleChange",value:function(e){this.setState(Object(O.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),E.post("/user/create/",{username:this.state.username,email:this.state.email,password:this.state.password}).then((function(e){return t.setState({username:"",password:"",redirect:"/login"}),e})).catch((function(e){console.log(e),t.setState({errors:e.response.data})}))}},{key:"render",value:function(){return this.state.redirect?r.a.createElement(g.a,{to:this.state.redirect}):r.a.createElement("div",{className:"submit-form"},r.a.createElement("h3",null,"Signup Page"),r.a.createElement("br",null),r.a.createElement("form",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Username:",r.a.createElement("input",{className:"form-control",type:"text",name:"username",value:this.state.username,onChange:this.handleChange}),r.a.createElement("p",{style:{color:"red"}},this.state.errors.username?this.state.errors.username:null))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Email:",r.a.createElement("input",{className:"form-control",type:"email",name:"email",value:this.state.email,onChange:this.handleChange}),r.a.createElement("p",{style:{color:"red"}},this.state.errors.email?this.state.errors.email:null))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Password:",r.a.createElement("input",{className:"form-control",type:"password",name:"password",value:this.state.password,onChange:this.handleChange}),r.a.createElement("p",{style:{color:"red"}},this.state.errors.password?this.state.errors.password:null))),r.a.createElement("p",null,"Already have an Account? ",r.a.createElement(i.b,{to:"/login"},"Login")),r.a.createElement("button",{className:"btn btn-primary",onClick:this.handleSubmit},"Submit")))}}]),a}(n.Component),x=Object(g.g)(w),A=function(e){Object(p.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).handleLogout=n.handleLogout.bind(Object(h.a)(n)),n.state={redirect:null},n}return Object(d.a)(a,[{key:"handleLogout",value:function(){var e=Object(u.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.post("/blacklist/",{refresh_token:localStorage.getItem("refresh_token")});case 3:return t=e.sent,localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),E.defaults.headers.Authorization=null,this.setState({redirect:this.props.history.push("/login")}),e.abrupt("return",t);case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,this,[[0,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){if(this.state.redirect)return r.a.createElement(g.a,{to:this.state.redirect});var e=localStorage.getItem("access_token");return r.a.createElement("div",null,r.a.createElement("nav",{className:"navbar navbar-expand navbar-dark bg-dark"},r.a.createElement("a",{href:"/",className:"navbar-brand"},"Home"),e?r.a.createElement("div",{className:"navbar-nav mr-auto"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(i.b,{to:"/tutorials",className:"nav-link"},"Tutorials")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(i.b,{to:"/add",className:"nav-link"},"Add")),r.a.createElement("button",{id:"btn-logout",className:"btn btn-outline-danger",onClick:this.handleLogout},"Logout")):r.a.createElement("div",{className:"navbar-nav mr-auto"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(i.b,{to:"/login",className:"nav-link"},"Login")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(i.b,{to:"/signup",className:"nav-link"},"Signup")))),r.a.createElement("div",{className:"container mt-3"},r.a.createElement(g.d,null,r.a.createElement(g.b,{exact:!0,path:["/","/tutorials"],component:C}),r.a.createElement(g.b,{exact:!0,path:"/add",component:k}),r.a.createElement(g.b,{path:"/tutorials/:id",component:j}),r.a.createElement(g.b,{exact:!0,path:"/login",component:S}),r.a.createElement(g.b,{exact:!0,path:"/signup",component:x}))))}}]),a}(n.Component),P=Object(g.g)(A);s.a.render(r.a.createElement(i.a,null,r.a.createElement(P,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[35,1,2]]]);
//# sourceMappingURL=main.b91b3374.chunk.js.map